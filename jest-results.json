{"numFailedTestSuites":5,"numFailedTests":9,"numPassedTestSuites":6,"numPassedTests":59,"numPendingTestSuites":3,"numPendingTests":5,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":14,"numTotalTests":73,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1753133761391,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Intersection Detection Accuracy Tests"],"duration":null,"failureDetails":[],"failureMessages":[],"fullName":"Intersection Detection Accuracy Tests should only create nodes at actual trail intersections and endpoints","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should only create nodes at actual trail intersections and endpoints"},{"ancestorTitles":["Intersection Detection Accuracy Tests"],"duration":null,"failureDetails":[],"failureMessages":[],"fullName":"Intersection Detection Accuracy Tests should handle different intersection tolerances correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should handle different intersection tolerances correctly"}],"coverage":{},"endTime":1753133770710,"message":"","name":"/Users/shaydu/dev/carthorse/src/__tests__/spatial/intersection-accuracy.test.ts","startTime":1753133770710,"status":"skipped","summary":""},{"assertionResults":[{"ancestorTitles":["CARTHORSE Basic Tests"],"duration":null,"failureDetails":[],"failureMessages":[],"fullName":"CARTHORSE Basic Tests DataIntegrityValidator can be instantiated","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"DataIntegrityValidator can be instantiated"}],"coverage":{},"endTime":1753133770710,"message":"","name":"/Users/shaydu/dev/carthorse/src/__tests__/basic.test.ts","startTime":1753133770710,"status":"skipped","summary":""},{"assertionResults":[{"ancestorTitles":["Test Database Setup"],"duration":63,"failureDetails":[],"failureMessages":[],"fullName":"Test Database Setup should ensure the test database exists and is seeded","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should ensure the test database exists and is seeded"}],"endTime":1753133764654,"message":"","name":"/Users/shaydu/dev/carthorse/src/__tests__/test-db-setup.test.ts","startTime":1753133761889,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["PostGIS Intersection Functions","detect_trail_intersections()"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"PostGIS Intersection Functions detect_trail_intersections() should detect intersections between crossing trails","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should detect intersections between crossing trails"},{"ancestorTitles":["PostGIS Intersection Functions","detect_trail_intersections()"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"PostGIS Intersection Functions detect_trail_intersections() should handle different tolerance values","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should handle different tolerance values"},{"ancestorTitles":["PostGIS Intersection Functions","build_routing_nodes()"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"PostGIS Intersection Functions build_routing_nodes() should create routing nodes from intersection detection","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should create routing nodes from intersection detection"},{"ancestorTitles":["PostGIS Intersection Functions","build_routing_nodes()"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"PostGIS Intersection Functions build_routing_nodes() should achieve reasonable node-to-trail ratio","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should achieve reasonable node-to-trail ratio"},{"ancestorTitles":["PostGIS Intersection Functions","build_routing_edges()"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"PostGIS Intersection Functions build_routing_edges() should create routing edges between nodes","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should create routing edges between nodes"},{"ancestorTitles":["PostGIS Intersection Functions","get_intersection_stats()"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"PostGIS Intersection Functions get_intersection_stats() should provide accurate intersection statistics","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should provide accurate intersection statistics"},{"ancestorTitles":["PostGIS Intersection Functions","validate_intersection_detection()"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"PostGIS Intersection Functions validate_intersection_detection() should pass all validation checks","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should pass all validation checks"},{"ancestorTitles":["PostGIS Intersection Functions","split_trails_at_intersections() 3D geometry preservation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"PostGIS Intersection Functions split_trails_at_intersections() 3D geometry preservation should produce only LINESTRINGZ segments with 3D coordinates","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should produce only LINESTRINGZ segments with 3D coordinates"},{"ancestorTitles":["PostGIS Intersection Functions","Integration Test: Full Pipeline"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"PostGIS Intersection Functions Integration Test: Full Pipeline should complete full intersection detection pipeline","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should complete full intersection detection pipeline"}],"endTime":1753133764696,"message":"","name":"/Users/shaydu/dev/carthorse/src/__tests__/spatial/postgis-functions.test.ts","startTime":1753133764628,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Intersection Detection Algorithm - Real Data Analysis"],"duration":null,"failureDetails":[],"failureMessages":[],"fullName":"Intersection Detection Algorithm - Real Data Analysis should analyze current intersection detection behavior with real data","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should analyze current intersection detection behavior with real data"},{"ancestorTitles":["Intersection Detection Algorithm - Real Data Analysis"],"duration":null,"failureDetails":[],"failureMessages":[],"fullName":"Intersection Detection Algorithm - Real Data Analysis should test different intersection tolerances","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should test different intersection tolerances"}],"coverage":{},"endTime":1753133770710,"message":"","name":"/Users/shaydu/dev/carthorse/src/__tests__/intersection-detection.test.ts","startTime":1753133770710,"status":"skipped","summary":""},{"assertionResults":[{"ancestorTitles":["Schema Version Validation"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Schema Version Validation should have expected schema version","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should have expected schema version"},{"ancestorTitles":["Schema Version Validation"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"Schema Version Validation should validate PostgreSQL schema if environment is configured","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should validate PostgreSQL schema if environment is configured"},{"ancestorTitles":["Schema Version Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Schema Version Validation should validate test database schema if it exists","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should validate test database schema if it exists"},{"ancestorTitles":["Schema Version Validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Schema Version Validation should validate production database schema if it exists","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should validate production database schema if it exists"}],"endTime":1753133764726,"message":"","name":"/Users/shaydu/dev/carthorse/src/__tests__/schema-version.test.ts","startTime":1753133764659,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Intersection Detection - Unit Tests","Algorithm Analysis"],"duration":26,"failureDetails":[],"failureMessages":[],"fullName":"Intersection Detection - Unit Tests Algorithm Analysis should identify the core intersection detection problems","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should identify the core intersection detection problems"},{"ancestorTitles":["Intersection Detection - Unit Tests","Algorithm Analysis"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Intersection Detection - Unit Tests Algorithm Analysis should test intersection tolerance sensitivity with mock data","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should test intersection tolerance sensitivity with mock data"},{"ancestorTitles":["Intersection Detection - Unit Tests","Algorithm Validation"],"duration":27,"failureDetails":[],"failureMessages":[],"fullName":"Intersection Detection - Unit Tests Algorithm Validation should validate that intersection detection is working correctly","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should validate that intersection detection is working correctly"}],"endTime":1753133764712,"message":"","name":"/Users/shaydu/dev/carthorse/src/__tests__/spatial/intersection-detection-unit.test.ts","startTime":1753133764600,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["PostGIS Functions Syntax Validation"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"PostGIS Functions Syntax Validation should have valid SQL syntax in PostGIS functions file","invocations":1,"location":null,"numPassingAsserts":19,"retryReasons":[],"status":"passed","title":"should have valid SQL syntax in PostGIS functions file"},{"ancestorTitles":["PostGIS Functions Syntax Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"PostGIS Functions Syntax Validation should have all required function signatures","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should have all required function signatures"},{"ancestorTitles":["PostGIS Functions Syntax Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"PostGIS Functions Syntax Validation should have proper error handling and validation","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should have proper error handling and validation"},{"ancestorTitles":["PostGIS Functions Syntax Validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"PostGIS Functions Syntax Validation should have comprehensive documentation and examples","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should have comprehensive documentation and examples"},{"ancestorTitles":["PostGIS Functions Syntax Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"PostGIS Functions Syntax Validation should use advanced PostGIS functions for optimization (warn only)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should use advanced PostGIS functions for optimization (warn only)"},{"ancestorTitles":["PostGIS Functions Syntax Validation"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"PostGIS Functions Syntax Validation should have proper return types and data structures","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should have proper return types and data structures"},{"ancestorTitles":["PostGIS Functions Syntax Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"PostGIS Functions Syntax Validation should include performance optimization features","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should include performance optimization features"}],"endTime":1753133764772,"message":"","name":"/Users/shaydu/dev/carthorse/src/__tests__/postgis-functions-syntax.test.ts","startTime":1753133764727,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["initial_view_bbox logic"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"initial_view_bbox logic uses a valid object from DB as-is","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"uses a valid object from DB as-is"},{"ancestorTitles":["initial_view_bbox logic"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"initial_view_bbox logic parses a valid stringified bbox from DB","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"parses a valid stringified bbox from DB"},{"ancestorTitles":["initial_view_bbox logic"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"initial_view_bbox logic falls back to calculated bbox for null","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"falls back to calculated bbox for null"},{"ancestorTitles":["initial_view_bbox logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"initial_view_bbox logic falls back to calculated bbox for string \"null\"","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"falls back to calculated bbox for string \"null\""},{"ancestorTitles":["initial_view_bbox logic"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"initial_view_bbox logic falls back to calculated bbox for empty string","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"falls back to calculated bbox for empty string"},{"ancestorTitles":["initial_view_bbox logic"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"initial_view_bbox logic falls back to calculated bbox for invalid object","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"falls back to calculated bbox for invalid object"},{"ancestorTitles":["initial_view_bbox logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"initial_view_bbox logic calculates the fallback bbox accurately","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"calculates the fallback bbox accurately"}],"endTime":1753133764775,"message":"","name":"/Users/shaydu/dev/carthorse/src/__tests__/bbox.test.ts","startTime":1753133764731,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Spatial Function Optimization Tests","PostGIS Spatial Functions"],"duration":431,"failureDetails":[],"failureMessages":[],"fullName":"Spatial Function Optimization Tests PostGIS Spatial Functions should use ST_Intersects for intersection detection","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should use ST_Intersects for intersection detection"},{"ancestorTitles":["Spatial Function Optimization Tests","PostGIS Spatial Functions"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Spatial Function Optimization Tests PostGIS Spatial Functions should use ST_DWithin for proximity queries","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should use ST_DWithin for proximity queries"},{"ancestorTitles":["Spatial Function Optimization Tests","PostGIS Spatial Functions"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Spatial Function Optimization Tests PostGIS Spatial Functions should use ST_Within for spatial containment","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should use ST_Within for spatial containment"},{"ancestorTitles":["Spatial Function Optimization Tests","PostGIS Spatial Functions"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'min_lng')\n    at Object.<anonymous> (/Users/shaydu/dev/carthorse/src/__tests__/spatial-optimization.test.ts:92:29)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Spatial Function Optimization Tests PostGIS Spatial Functions should use ST_Envelope for efficient bbox calculations","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use ST_Envelope for efficient bbox calculations"},{"ancestorTitles":["Spatial Function Optimization Tests","Spatial Indexes"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"Spatial Function Optimization Tests Spatial Indexes should have spatial indexes on geometry columns","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have spatial indexes on geometry columns"},{"ancestorTitles":["Spatial Function Optimization Tests","Spatial Indexes"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Spatial Function Optimization Tests Spatial Indexes should have spatial indexes on routing nodes","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have spatial indexes on routing nodes"},{"ancestorTitles":["Spatial Function Optimization Tests","Data Validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Spatial Function Optimization Tests Data Validation should validate geometry validity using ST_IsValid","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate geometry validity using ST_IsValid"},{"ancestorTitles":["Spatial Function Optimization Tests","Data Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Spatial Function Optimization Tests Data Validation should ensure coordinate system consistency (SRID 4326)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should ensure coordinate system consistency (SRID 4326)"},{"ancestorTitles":["Spatial Function Optimization Tests","Data Validation"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Spatial Function Optimization Tests Data Validation should validate intersection nodes have proper trail connections","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate intersection nodes have proper trail connections"},{"ancestorTitles":["Spatial Function Optimization Tests","Enhanced Validation Functions"],"duration":14,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThan\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: > \u001b[32m0\u001b[39m\nReceived:   \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThan\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: > \u001b[32m0\u001b[39m\nReceived:   \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/shaydu/dev/carthorse/src/__tests__/spatial-optimization.test.ts:245:42)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Spatial Function Optimization Tests Enhanced Validation Functions should run enhanced spatial validation","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"failed","title":"should run enhanced spatial validation"},{"ancestorTitles":["Spatial Function Optimization Tests","Enhanced Validation Functions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Spatial Function Optimization Tests Enhanced Validation Functions should validate spatial containment","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate spatial containment"},{"ancestorTitles":["Spatial Function Optimization Tests","Performance Optimization"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Spatial Function Optimization Tests Performance Optimization should use bounding box pre-filtering for spatial joins","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should use bounding box pre-filtering for spatial joins"},{"ancestorTitles":["Spatial Function Optimization Tests","Performance Optimization"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Spatial Function Optimization Tests Performance Optimization should use spatial indexes for distance calculations","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should use spatial indexes for distance calculations"},{"ancestorTitles":["Spatial Function Optimization Tests","API Endpoint Enhancement"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Spatial Function Optimization Tests API Endpoint Enhancement should support spatial filtering for bbox queries","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should support spatial filtering for bbox queries"},{"ancestorTitles":["Spatial Function Optimization Tests","API Endpoint Enhancement"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Spatial Function Optimization Tests API Endpoint Enhancement should validate intersection data integrity","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate intersection data integrity"}],"endTime":1753133764852,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mSpatial Function Optimization Tests › PostGIS Spatial Functions › should use ST_Envelope for efficient bbox calculations\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'min_lng')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 90 |\u001b[39m \u001b[32m      `\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 91 |\u001b[39m       \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 92 |\u001b[39m       expect(result\u001b[33m.\u001b[39mrows[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mmin_lng)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 93 |\u001b[39m       expect(result\u001b[33m.\u001b[39mrows[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mmax_lng)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m       expect(result\u001b[33m.\u001b[39mrows[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mmin_lat)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 95 |\u001b[39m       expect(result\u001b[33m.\u001b[39mrows[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mmax_lat)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/__tests__/spatial-optimization.test.ts\u001b[39m\u001b[0m\u001b[2m:92:29)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mSpatial Function Optimization Tests › Enhanced Validation Functions › should run enhanced spatial validation\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThan\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: > \u001b[32m0\u001b[39m\n    Received:   \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 243 |\u001b[39m       }\u001b[22m\n\u001b[2m     \u001b[90m 244 |\u001b[39m       expect(result\u001b[33m.\u001b[39missues\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBeGreaterThanOrEqual(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 245 |\u001b[39m       expect(result\u001b[33m.\u001b[39msummary\u001b[33m.\u001b[39mtotalTrails)\u001b[33m.\u001b[39mtoBeGreaterThan(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 246 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 247 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 248 |\u001b[39m     test(\u001b[32m'should validate spatial containment'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/__tests__/spatial-optimization.test.ts\u001b[39m\u001b[0m\u001b[2m:245:42)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/shaydu/dev/carthorse/src/__tests__/spatial-optimization.test.ts","startTime":1753133761889,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Simple Intersection Detection Validation - Seattle Region"],"duration":489,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThan\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: > \u001b[32m0\u001b[39m\nReceived:   \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThan\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: > \u001b[32m0\u001b[39m\nReceived:   \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/shaydu/dev/carthorse/src/__tests__/spatial/intersection-detection-simple.test.ts:134:42)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Simple Intersection Detection Validation - Seattle Region validates intersection detection algorithm with Seattle dataset","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"validates intersection detection algorithm with Seattle dataset"},{"ancestorTitles":["Simple Intersection Detection Validation - Seattle Region"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"Simple Intersection Detection Validation - Seattle Region validates intersection detection edge cases","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"validates intersection detection edge cases"}],"endTime":1753133765094,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mSimple Intersection Detection Validation - Seattle Region › validates intersection detection algorithm with Seattle dataset\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThan\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: > \u001b[32m0\u001b[39m\n    Received:   \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 132 |\u001b[39m     \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m client\u001b[33m.\u001b[39mquery(\u001b[32m`SELECT COUNT(*) FROM ${stagingSchema}.trails`\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 133 |\u001b[39m     console\u001b[33m.\u001b[39mlog(\u001b[32m`Staging trails count:`\u001b[39m\u001b[33m,\u001b[39m result\u001b[33m.\u001b[39mrows[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mcount)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 134 |\u001b[39m     expect(\u001b[33mNumber\u001b[39m(result\u001b[33m.\u001b[39mrows[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mcount))\u001b[33m.\u001b[39mtoBeGreaterThan(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 135 |\u001b[39m     \u001b[36mawait\u001b[39m client\u001b[33m.\u001b[39mend()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 136 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 137 |\u001b[39m     \u001b[90m// Optionally clean up staging schema\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/__tests__/spatial/intersection-detection-simple.test.ts\u001b[39m\u001b[0m\u001b[2m:134:42)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/shaydu/dev/carthorse/src/__tests__/spatial/intersection-detection-simple.test.ts","startTime":1753133761889,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Intersection Detection Validation - Boulder Region"],"duration":597,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThan\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: > \u001b[32m0\u001b[39m\nReceived:   \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThan\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: > \u001b[32m0\u001b[39m\nReceived:   \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/shaydu/dev/carthorse/src/__tests__/spatial/intersection-detection-validation.test.ts:132:42)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Intersection Detection Validation - Boulder Region validates intersection detection algorithm with comprehensive reference values","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"validates intersection detection algorithm with comprehensive reference values"},{"ancestorTitles":["Intersection Detection Validation - Boulder Region"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"Intersection Detection Validation - Boulder Region validates intersection detection edge cases and error handling","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"validates intersection detection edge cases and error handling"},{"ancestorTitles":["Intersection Detection Validation - Boulder Region"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Intersection Detection Validation - Boulder Region provides detailed intersection detection reference documentation","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"provides detailed intersection detection reference documentation"}],"endTime":1753133765102,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntersection Detection Validation - Boulder Region › validates intersection detection algorithm with comprehensive reference values\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThan\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: > \u001b[32m0\u001b[39m\n    Received:   \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 130 |\u001b[39m     \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m client\u001b[33m.\u001b[39mquery(\u001b[32m`SELECT COUNT(*) FROM ${stagingSchema}.trails`\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 131 |\u001b[39m     console\u001b[33m.\u001b[39mlog(\u001b[32m`Staging trails count:`\u001b[39m\u001b[33m,\u001b[39m result\u001b[33m.\u001b[39mrows[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mcount)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 132 |\u001b[39m     expect(\u001b[33mNumber\u001b[39m(result\u001b[33m.\u001b[39mrows[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mcount))\u001b[33m.\u001b[39mtoBeGreaterThan(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 133 |\u001b[39m     \u001b[36mawait\u001b[39m client\u001b[33m.\u001b[39mend()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 134 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 135 |\u001b[39m     \u001b[90m// Optionally clean up staging schema\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/__tests__/spatial/intersection-detection-validation.test.ts\u001b[39m\u001b[0m\u001b[2m:132:42)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/shaydu/dev/carthorse/src/__tests__/spatial/intersection-detection-validation.test.ts","startTime":1753133761887,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Routing Graph Export Pipeline"],"duration":411,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThan\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: > \u001b[32m0\u001b[39m\nReceived:   \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThan\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: > \u001b[32m0\u001b[39m\nReceived:   \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/shaydu/dev/carthorse/src/__tests__/routing-graph-export.test.ts:70:42)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Routing Graph Export Pipeline orchestrator exports routing_nodes and routing_edges with correct schema and data for boulder","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"orchestrator exports routing_nodes and routing_edges with correct schema and data for boulder"},{"ancestorTitles":["Routing Graph Export Pipeline"],"duration":360,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThan\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: > \u001b[32m0\u001b[39m\nReceived:   \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThan\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: > \u001b[32m0\u001b[39m\nReceived:   \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/shaydu/dev/carthorse/src/__tests__/routing-graph-export.test.ts:216:42)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Routing Graph Export Pipeline orchestrator exports routing_nodes and routing_edges with correct schema and data for seattle","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"orchestrator exports routing_nodes and routing_edges with correct schema and data for seattle"}],"endTime":1753133765451,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRouting Graph Export Pipeline › orchestrator exports routing_nodes and routing_edges with correct schema and data for boulder\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThan\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: > \u001b[32m0\u001b[39m\n    Received:   \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m client\u001b[33m.\u001b[39mquery(\u001b[32m`SELECT COUNT(*) FROM ${stagingSchema}.trails`\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     console\u001b[33m.\u001b[39mlog(\u001b[32m`Staging trails count:`\u001b[39m\u001b[33m,\u001b[39m result\u001b[33m.\u001b[39mrows[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mcount)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     expect(\u001b[33mNumber\u001b[39m(result\u001b[33m.\u001b[39mrows[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mcount))\u001b[33m.\u001b[39mtoBeGreaterThan(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m     \u001b[36mawait\u001b[39m client\u001b[33m.\u001b[39mend()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m     \u001b[90m// Optionally clean up staging schema\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/__tests__/routing-graph-export.test.ts\u001b[39m\u001b[0m\u001b[2m:70:42)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRouting Graph Export Pipeline › orchestrator exports routing_nodes and routing_edges with correct schema and data for seattle\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThan\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: > \u001b[32m0\u001b[39m\n    Received:   \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 214 |\u001b[39m     \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m client\u001b[33m.\u001b[39mquery(\u001b[32m`SELECT COUNT(*) FROM ${stagingSchema}.trails`\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 215 |\u001b[39m     console\u001b[33m.\u001b[39mlog(\u001b[32m`Staging trails count:`\u001b[39m\u001b[33m,\u001b[39m result\u001b[33m.\u001b[39mrows[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mcount)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 216 |\u001b[39m     expect(\u001b[33mNumber\u001b[39m(result\u001b[33m.\u001b[39mrows[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mcount))\u001b[33m.\u001b[39mtoBeGreaterThan(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 217 |\u001b[39m     \u001b[36mawait\u001b[39m client\u001b[33m.\u001b[39mend()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 218 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 219 |\u001b[39m     \u001b[90m// Optionally clean up staging schema\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/__tests__/routing-graph-export.test.ts\u001b[39m\u001b[0m\u001b[2m:216:42)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/shaydu/dev/carthorse/src/__tests__/routing-graph-export.test.ts","startTime":1753133761889,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["CLI Integration Tests"],"duration":126,"failureDetails":[],"failureMessages":[],"fullName":"CLI Integration Tests CLI --help shows usage information","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"CLI --help shows usage information"},{"ancestorTitles":["CLI Integration Tests"],"duration":111,"failureDetails":[],"failureMessages":[],"fullName":"CLI Integration Tests CLI --version shows version information","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"CLI --version shows version information"},{"ancestorTitles":["CLI Integration Tests"],"duration":120,"failureDetails":[],"failureMessages":[],"fullName":"CLI Integration Tests CLI validates required --region parameter","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"CLI validates required --region parameter"},{"ancestorTitles":["CLI Integration Tests"],"duration":69,"failureDetails":[],"failureMessages":[],"fullName":"CLI Integration Tests CLI validates required --out parameter","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"CLI validates required --out parameter"},{"ancestorTitles":["CLI Integration Tests"],"duration":281,"failureDetails":[],"failureMessages":[],"fullName":"CLI Integration Tests CLI accepts valid parameters without errors","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"CLI accepts valid parameters without errors"},{"ancestorTitles":["CLI Integration Tests"],"duration":1025,"failureDetails":[],"failureMessages":[],"fullName":"CLI Integration Tests CLI --validate flag is recognized","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"CLI --validate flag is recognized"},{"ancestorTitles":["CLI Integration Tests"],"duration":158,"failureDetails":[],"failureMessages":[],"fullName":"CLI Integration Tests CLI --build-master flag is recognized","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"CLI --build-master flag is recognized"},{"ancestorTitles":["CLI Integration Tests"],"duration":407,"failureDetails":[],"failureMessages":[],"fullName":"CLI Integration Tests CLI --simplify-tolerance accepts numeric values","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"CLI --simplify-tolerance accepts numeric values"},{"ancestorTitles":["CLI Integration Tests"],"duration":364,"failureDetails":[],"failureMessages":[],"fullName":"CLI Integration Tests CLI --target-size accepts numeric values","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"CLI --target-size accepts numeric values"},{"ancestorTitles":["CLI Integration Tests"],"duration":339,"failureDetails":[{"matcherResult":{"actual":0,"expected":0,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: not \u001b[32m0\u001b[39m","name":"toBe","pass":true}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: not \u001b[32m0\u001b[39m\n    at Object.<anonymous> (/Users/shaydu/dev/carthorse/src/__tests__/cli-integration.test.ts:164:29)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"CLI Integration Tests CLI rejects invalid numeric values","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"CLI rejects invalid numeric values"},{"ancestorTitles":["CLI Integration Tests"],"duration":124,"failureDetails":[],"failureMessages":[],"fullName":"CLI Integration Tests CLI shows meaningful error for invalid region","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"CLI shows meaningful error for invalid region"},{"ancestorTitles":["CLI End-to-End Tests (requires test database)"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"CLI End-to-End Tests (requires test database) CLI can export a region successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"CLI can export a region successfully"},{"ancestorTitles":["CLI End-to-End Tests (requires test database)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CLI End-to-End Tests (requires test database) CLI can build master database and export","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"CLI can build master database and export"},{"ancestorTitles":["End-to-end bbox export integration"],"duration":1432,"failureDetails":[{"code":"SQLITE_ERROR"}],"failureMessages":["SqliteError: no such table: regions\n    at Database.prepare (/Users/shaydu/dev/carthorse/node_modules/better-sqlite3/lib/methods/wrappers.js:5:21)\n    at Object.<anonymous> (/Users/shaydu/dev/carthorse/src/__tests__/cli-integration.test.ts:306:25)\n    at Promise.then.completed (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/shaydu/dev/carthorse/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/shaydu/dev/carthorse/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/shaydu/dev/carthorse/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"End-to-end bbox export integration exports the custom initial_view_bbox for boulder","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"exports the custom initial_view_bbox for boulder"},{"ancestorTitles":["End-to-end bbox export integration"],"duration":1124,"failureDetails":[{"code":"SQLITE_ERROR"}],"failureMessages":["SqliteError: no such table: regions\n    at Database.prepare (/Users/shaydu/dev/carthorse/node_modules/better-sqlite3/lib/methods/wrappers.js:5:21)\n    at Object.<anonymous> (/Users/shaydu/dev/carthorse/src/__tests__/cli-integration.test.ts:345:25)\n    at Promise.then.completed (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/shaydu/dev/carthorse/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/shaydu/dev/carthorse/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/shaydu/dev/carthorse/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/shaydu/dev/carthorse/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"End-to-end bbox export integration calculates and exports the fallback initial_view_bbox for seattle","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"calculates and exports the fallback initial_view_bbox for seattle"}],"endTime":1753133770161,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mCLI Integration Tests › CLI rejects invalid numeric values\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: not \u001b[32m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 162 |\u001b[39m     \u001b[22m\n\u001b[2m     \u001b[90m 163 |\u001b[39m     \u001b[90m// Should fail on invalid numeric input\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 164 |\u001b[39m     expect(result\u001b[33m.\u001b[39mcode)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoBe(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 165 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 166 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 167 |\u001b[39m   test(\u001b[32m'CLI shows meaningful error for invalid region'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/__tests__/cli-integration.test.ts\u001b[39m\u001b[0m\u001b[2m:164:29)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mEnd-to-end bbox export integration › exports the custom initial_view_bbox for boulder\u001b[39m\u001b[22m\n\n    SqliteError: no such table: regions\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 304 |\u001b[39m       console\u001b[33m.\u001b[39mlog(\u001b[32m'[TEST] Opening exported DB for Boulder'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 305 |\u001b[39m       db \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDatabase\u001b[39m(customDbPath\u001b[33m,\u001b[39m { readonly\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 306 |\u001b[39m       \u001b[36mconst\u001b[39m region \u001b[33m=\u001b[39m db\u001b[33m.\u001b[39mprepare(\u001b[32m'SELECT * FROM regions WHERE id = ?'\u001b[39m)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(customRegion) \u001b[36mas\u001b[39m any\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 307 |\u001b[39m       console\u001b[33m.\u001b[39mlog(\u001b[32m'[TEST] DB opened, region row:'\u001b[39m\u001b[33m,\u001b[39m region)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 308 |\u001b[39m       expect(region)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 309 |\u001b[39m       expect(region\u001b[33m.\u001b[39minitial_view_bbox)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Database.prepare (\u001b[22m\u001b[2mnode_modules/better-sqlite3/lib/methods/wrappers.js\u001b[2m:5:21)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/__tests__/cli-integration.test.ts\u001b[39m\u001b[0m\u001b[2m:306:25)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mEnd-to-end bbox export integration › calculates and exports the fallback initial_view_bbox for seattle\u001b[39m\u001b[22m\n\n    SqliteError: no such table: regions\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 343 |\u001b[39m       console\u001b[33m.\u001b[39mlog(\u001b[32m'[TEST] Opening exported DB for Seattle'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 344 |\u001b[39m       db \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDatabase\u001b[39m(fallbackDbPath\u001b[33m,\u001b[39m { readonly\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 345 |\u001b[39m       \u001b[36mconst\u001b[39m region \u001b[33m=\u001b[39m db\u001b[33m.\u001b[39mprepare(\u001b[32m'SELECT * FROM regions WHERE id = ?'\u001b[39m)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(fallbackRegion) \u001b[36mas\u001b[39m any\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 346 |\u001b[39m       console\u001b[33m.\u001b[39mlog(\u001b[32m'[TEST] DB opened, region row:'\u001b[39m\u001b[33m,\u001b[39m region)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 347 |\u001b[39m       expect(region)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 348 |\u001b[39m       expect(region\u001b[33m.\u001b[39minitial_view_bbox)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Database.prepare (\u001b[22m\u001b[2mnode_modules/better-sqlite3/lib/methods/wrappers.js\u001b[2m:5:21)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/__tests__/cli-integration.test.ts\u001b[39m\u001b[0m\u001b[2m:345:25)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/shaydu/dev/carthorse/src/__tests__/cli-integration.test.ts","startTime":1753133761954,"status":"failed","summary":""}],"wasInterrupted":false}
